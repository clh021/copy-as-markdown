!function(){"use strict";String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)};var a=function(a){return a?(a=a.replace(/&?utm_\w+(=[^&]+)/g,""),a.endsWith("/?")?a=a.substring(0,a.length-2):a.endsWith("?")&&(a=a.substring(0,a.length-1)),a):""},b=function(a){return a?a.replace(/\s*\|.*/g,""):void 0},c=function(){return rangy.getSelection().toHtml()},d=new reMarked({h1_setext:!1,h2_setext:!1,nbsp_spc:!0,span_tags:!1,div_tags:!1});chrome.runtime.onMessage.addListener(function(e,f,g){if("html2markdown"===e.action){var h,i=c();h=i?d.render(i):"["+b(document.title)+"]("+a(location.href)+")",chrome.runtime.sendMessage({action:"copytoclipboard",content:h},function(a){return a.success?void g({sucess:!0}):void 0}),g({sucess:!0})}})}();